<html>
<body>
    <h2>Capture Material Label</h2>
    <video id="video" width="640" height="480" autoplay></video>
    <button id="capture">Capture</button>
    <canvas id="canvas" style="display:none;"></canvas>
    <script>
        const video = document.getElementById('video');
        const captureButton = document.getElementById('capture');
        const canvas = document.getElementById('canvas');
        const context = canvas.getContext('2d');

        navigator.mediaDevices.getUserMedia({ video: true })
        .then(function(stream) {
            video.srcObject = stream;
        });

        captureButton.addEventListener('click', function() {
            context.drawImage(video, 0, 0, canvas.width, canvas.height);
            const dataUrl = canvas.toDataURL('image/png');
            frappe.call({
                method: 'purchase_receipt_ocr.purchase_receipt_ocr.doctype.purchase_receipt.purchase_receipt.process_ocr',
                args: { image_data: dataUrl },
                callback: function(r) {
                    if (r.message) {
                        alert("Data extracted: " + r.message);
                    }
                }
            });
        });
    </script>
</body>
</html>
